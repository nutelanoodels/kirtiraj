<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Order Bill</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      color: #000;
    }

    .bill {
      max-width: 380px;
      margin: auto;
      border: 1px dashed #333;
      padding: 15px;
    }

    h2 {
      text-align: center;
      margin-bottom: 5px;
    }

    .center {
      text-align: center;
      font-size: 12px;
    }

    hr {
      border: none;
      border-top: 1px dashed #333;
      margin: 10px 0;
    }

    .info {
      font-size: 13px;
      margin-bottom: 10px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
    }

    th, td {
      padding: 6px 4px;
      border-bottom: 1px dotted #999;
    }

    .right {
      text-align: right;
    }

    .total {
      font-weight: bold;
      font-size: 15px;
      text-align: right;
    }

    .actions {
      text-align: center;
      margin-bottom: 12px;
    }

    button {
      padding: 8px 12px;
      margin: 4px;
      cursor: pointer;
    }

    @media print {
      .actions {
        display: none;
      }
    }
  </style>
</head>

<body>

<div class="actions">
  <button onclick="shareOrder()">ðŸ“¦ Share with Delivery</button>
  <button onclick="window.print()">ðŸ–¨ Print</button>
</div>

<div class="bill">
  <h2>Kirtiraj</h2>
  <div class="center">Snacks & Namkeen</div>

  <hr>

  <div class="info">
    <strong>Order ID:</strong> {{ order.id }}<br>
    <strong>Date:</strong> {{ order.created_at|date:"d M Y" }}<br>
    <strong>Time:</strong> {{ order.created_at|time:"h:i A" }}<br>
    <strong>Name:</strong> {{ order.name }}<br>
    <strong>Phone:</strong> {{ order.phone }}<br>
    <strong>Address:</strong> {{ order.address }}
  </div>

  <hr>

  <table>
    <thead>
      <tr>
        <th>Item</th>
        <th class="right">Qty</th>
      </tr>
    </thead>
    <tbody>
      {% for item in items %}
      <tr>
        <td>{{ item.product_name }}</td>
        <td class="right">{{ item.quantity }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <hr>

  <div class="total">
    Total: â‚¹{{ order.total_amount|floatformat:2 }}
  </div>

  <hr>

  <div class="center">
    Please deliver this order.
  </div>
</div>

<script>
function shareOrder() {
  const message = `
ðŸ“¦ DELIVERY ORDER

Order ID: {{ order.id }}
Name: {{ order.name }}
Phone: {{ order.phone }}

Address:
{{ order.address }}

Items:
{% for item in items %}
- {{ item.product_name }} Ã— {{ item.quantity }}
{% endfor %}

Total: â‚¹{{ order.total_amount|floatformat:2 }}
`.trim();

  window.open(
    "https://wa.me/?text=" + encodeURIComponent(message),
    "_blank"
  );
}
</script>

</body>
</html>